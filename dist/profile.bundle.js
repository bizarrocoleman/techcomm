var Profile=function(){var e,r,t,a,n,o,i=$("#page-loader"),l='<div class="preloader pls-white"><svg class="pl-circular" viewBox="25 25 50 50"><circle class="plc-path" cx="50" cy="50" r="20"></circle></svg></div>',c=null,s={urlApi:"/api/User/",urlApiUpdateBasicInformation:"UpdateBasicInformation",urlApiUpdateSummary:"UpdateSummary",urlApiUploadPicture:"UpdateProfilePicture",urlApiUpdateInvoiceData:"UpdateInvoiceData",textMax:140},u={UpdateAboutInfo:"/api/User/UpdateAboutInfo",UpdateSummaryInfo:"/api/User/UpdateSummaryInfo",GetUserInfo:"/api/User/GetUserInfo"},d=function(){i.show()},p=function(){i.hide()},f=function(){$(window).scroll(function(e){var r=$(window).scrollTop();r>=200?$("div.scrollTop").fadeIn():r<200&&$("div.scrollTop").fadeOut()}),$("#scrollTop").on("click",function(e){$("html, body").animate({scrollTop:0},"slow")})},m=function(){function o(){function n(){setTimeout(function(){p.text(d),$(c).removeClass("disabled")},800)}var o=!1;if(""===e.val()?(e.parent().parent().addClass("has-error"),o=!0):e.parent().parent().hasClass("has-error")&&e.parent().parent().removeClass("has-error"),""===a.val()?(a.parent().parent().addClass("has-error"),o=!0):a.parent().parent().hasClass("has-error")&&a.parent().parent().removeClass("has-error"),""===r.val()?(r.parent().parent().next().removeClass("hidden"),o=!0):r.parent().parent().next().addClass("hidden"),""===t.val()?(t.parent().parent().next().removeClass("hidden"),o=!0):t.parent().parent().next().addClass("hidden"),!o){p.html(l);var i={Username:e.val().trim(),Sector:r.val().trim(),Country:t.val().trim(),City:a.val().trim(),Summary:""};$(c).addClass("disabled"),ApiGenially.executeCall(i,u.UpdateAboutInfo,"POST",n)}}function i(){function e(){setTimeout(function(){p.text(d),$(c).removeClass("disabled")},800)}var r=!1;if(""===n.val()?(n.parent().parent().addClass("has-error"),r=!0):n.parent().parent().hasClass("has-error")&&n.parent().parent().removeClass("has-error"),!r){p.html(l);var t={Username:"",Sector:"",Country:"",City:"",Summary:n.val().trim()};$(c).addClass("disabled"),ApiGenially.executeCall(t,u.UpdateSummaryInfo,"POST",e)}}var c=this,s=$(this).attr("data-process"),d=$(this).text().trim(),p=$(this);if(null!==s)switch(s){case"about":o();break;case"summary":i();break;default:return}},h=function(){function e(e){r.selectpicker("val",v(e.Sector)),t.selectpicker("val",e.Country)}ApiGenially.executeCall("",u.GetUserInfo,"GET",e)},v=function(e){if("ES"===languageShort)switch(e){case"Blogger":return"Blogger";case"Brand / Company":return"Marca / Empresa";case"Designer":return"Diseñador";case"Marketing Agency":return"Agencia de Marketing";case"Media":return"Medio de Comunicación";case"Other":return"Otro";case"Public Service / NGO":return"Servicio Público / ONG";case"Student":return"Estudiante";case"Teacher":return"Formador";case"Web Developer":return"Desarrollador Web";default:return e}else if("EN"===languageShort)switch(e){case"Blogger":return"Blogger";case"Marca / Empresa":return"Brand / Company";case"Diseñador":return"Designer";case"Agencia de Marketing":return"Marketing Agency";case"Medio de Comunicación":return"Media";case"Otro":return"Other";case"Servicio Público / ONG":return"Public Service / NGO";case"Estudiante":return"Student";case"Formador":return"Teacher";case"Desarrollador Web":return"Web Developer";default:return e}},y=function(e){c=$("#profileCropContainer").croppie({viewport:{width:150,height:150,type:"circle"},boundary:{width:150,height:150},mouseWheelZoom:!0}),c.croppie("bind",{url:e})},g=function(){$("#previewProfilePicture").hide(),$("#user-name").hide(),$("#buttonsPicture").show();var e=$("#profilePicture").attr("src");y(e),$("#profileCropContainer").show(),$(".cr-slider-wrap").hide(),$("#saveChangePhoto").hide()},C=function(){c.croppie("destroy"),$("#profileCropContainer").hide(),$("#buttonsPicture").hide(),$("#user-name").show(),$("#previewProfilePicture").show()},w=function(e){function r(){return $.ajax({url:s.urlApi+s.urlApiUploadPicture,type:"POST",data:o,cache:!1,contentType:!1,headers:{Accept:"*/*"},processData:!1})}function t(e){$("#profilePicture").attr("src",e),notify.message=locale.profile.ImageUploaded,notify.type="success",notify.show(),C()}function a(e){notify.message=locale.profile.GenericError,notify.type="danger",notify.show()}var n=helper.cleanData64(e),o=new FormData,i=n,l=document.getElementById("fileUpload"),c=l.files[0];o.append("opmlFile",i),o.append("mimeType",c.type),r().done(t).fail(a)},b=function(){0!==document.getElementById("fileUpload").files.length&&c.croppie("result",{type:"canvas",size:"viewport"}).then(function(e){w(e)})},P=function(){$("#editPicture").click(g),$("#cancelChangePhoto").click(C),$("#saveChangePhoto").click(b),$(".fileinput").on("change.bs.fileinput",function(e){e.stopPropagation();var r=$("#inputPicture").find("img").attr("src");return c.croppie("destroy"),y(r),$(".cr-slider-wrap").show(),$("#saveChangePhoto").show(),!1})},U=function(){o.click(m),P()},T=function(){e=$(document.getElementById("profile-username")),r=$(document.getElementById("profile-sector")),t=$(document.getElementById("profile-country")),a=$(document.getElementById("profile-city")),n=$(document.getElementById("profile-about")),o=$(".profile-update"),helper.beautifulInputText(),helper.wavesButtons(),f(),U(),r.selectpicker(),t.selectpicker(),h(),$(".contracted-logo").click(function(){$("html, body").animate({scrollTop:0},"slow")}),p()};return{initialize:T,showLoader:d,hideLoader:p}}(),ApiGenially=function(){function e(e,r,t,a,n){function o(e,r,t){"timeout"===r&&swal({title:locale.error.timeoutTitle,text:locale.error.timeoutDescription,type:"warning",confirmButtonText:locale.error.timeoutButton,confirmButtonColor:"#079dac"})}function i(e,r,t){return 401===e.status?void location.reload():void("timeout"===r&&swal({title:locale.error.timeoutTitle,text:locale.error.timeoutDescription,type:"warning",confirmButtonText:locale.error.timeoutButton,confirmButtonColor:"#079dac"}))}function l(){return $.ajax({data:e,url:r,type:t,contentType:"application/json; charset=utf-8"})}"undefined"==typeof a&&(a=o),"undefined"==typeof n&&(n=i),"GET"!==t&&(e=JSON.stringify(e)),l().done(a).fail(n)}return{executeCall:e}}();$(document).ready(function(){Profile.initialize()}),$(window).scroll(function(){var e=$(window).scrollTop(),r=$("#header");e>20?r.addClass("contracted"):r.removeClass("contracted"),e>180?r.children(".brand").addClass("contracted"):r.children(".brand").removeClass("contracted")});